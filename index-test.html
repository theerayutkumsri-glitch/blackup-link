<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Pixel Config Test - www.test.com</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 { color: #333; margin-bottom: 10px; }
        .subtitle { color: #666; margin-bottom: 30px; font-size: 14px; }
        
        .config-info {
            background: #f5f5f5;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }
        .config-info h3 { color: #667eea; margin-bottom: 10px; }
        .config-info p { margin: 8px 0; color: #555; }
        .label { font-weight: bold; color: #333; }
        .value { color: #667eea; word-break: break-all; }
        
        .button-group {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        button {
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
            font-size: 14px;
        }
        .btn-primary {
            background: #667eea;
            color: white;
        }
        .btn-primary:hover { background: #5568d3; transform: translateY(-2px); }
        
        .btn-secondary {
            background: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
        }
        .btn-secondary:hover { background: #e0e0e0; }
        
        .url-section {
            background: #fffbea;
            border: 2px solid #ffc107;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
        .url-section h3 { color: #ff9800; margin-bottom: 15px; font-size: 16px; }
        .url-example {
            background: #fff;
            border: 1px solid #ddd;
            padding: 12px;
            margin: 8px 0;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
            font-size: 13px;
        }
        .url-example a {
            color: #667eea;
            text-decoration: none;
            word-break: break-all;
        }
        .url-example a:hover { text-decoration: underline; }
        
        .console-log {
            background: #1e1e1e;
            color: #d4d4d4;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            max-height: 250px;
            overflow-y: auto;
            border: 1px solid #333;
        }
        .console-log .log-line { margin: 4px 0; line-height: 1.4; }
        .log-success { color: #4ec9b0; }
        .log-error { color: #f48771; }
        .log-info { color: #9cdcfe; }
        
        .status {
            padding: 12px 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-weight: bold;
            font-size: 14px;
        }
        .status-loading { background: #fff3cd; color: #856404; }
        .status-success { background: #d4edda; color: #155724; }
        .status-error { background: #f8d7da; color: #721c24; }
        
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
            font-size: 13px;
        }
        
        .instruction-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 5px;
            margin-top: 30px;
            border-left: 4px solid #1976d2;
        }
        .instruction-box h3 { color: #1976d2; margin-bottom: 10px; }
        .instruction-box ol { margin-left: 20px; color: #555; line-height: 1.8; }
        .instruction-box li { margin: 8px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üî• Meta Pixel Config Test</h1>
        <p class="subtitle">‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡πÇ‡∏´‡∏•‡∏î Config ‡∏à‡∏≤‡∏Å GitHub - URL: www.test.com?key=page1</p>
        
        <div id="status" class="status status-loading">‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î Config...</div>
        
        <!-- Current Config Info -->
        <div id="configContainer" style="display:none;">
            <div class="config-info">
                <h3>‚úÖ Config ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</h3>
                <p><span class="label">üìå Page Key:</span> <span class="value" id="currentKey">-</span></p>
                <p><span class="label">üìù Page Name:</span> <span class="value" id="currentName">-</span></p>
                <p><span class="label">üî∑ Pixel ID:</span> <code id="currentPixel">-</code></p>
                <p><span class="label">‚úîÔ∏è Domain Verification:</span> <code id="currentDom" style="font-size: 11px;">-</code></p>
            </div>
        </div>
        
        <!-- URL Examples -->
        <div class="url-section">
            <h3>üìç URL Examples - ‡∏•‡∏≠‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å:</h3>
            <p style="margin-bottom: 10px; font-size: 12px; color: #666;">
                (‡∏Å‡∏î‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô key ‡πÅ‡∏•‡∏∞‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á)
            </p>
            <div class="url-example">
                üåê <a href="?key=page1" target="_blank">https://www.test.com?key=page1</a>
                <span style="color: #999; margin-left: 10px;">(‡πÄ‡∏ß‡πá‡∏ö‡∏´‡∏•‡∏±‡∏Å)</span>
            </div>
            <div class="url-example">
                üåê <a href="?key=page2" target="_blank">https://www.test.com?key=page2</a>
                <span style="color: #999; margin-left: 10px;">(‡πÅ‡∏Ñ‡∏°‡πÄ‡∏õ‡∏ç‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô)</span>
            </div>
        </div>
        
        <!-- Test Buttons -->
        <div style="margin: 30px 0;">
            <h3 style="margin-bottom: 15px;">üéØ ‡∏ó‡∏î‡∏™‡∏≠‡∏ö Event Tracking:</h3>
            <div class="button-group">
                <button class="btn-primary" onclick="testTrackEvent('Contact', {})">
                    üì≤ Track: Contact
                </button>
                <button class="btn-primary" onclick="testTrackEvent('AddToCart', {value: 100, currency: 'THB'})">
                    üõí Track: AddToCart (100 THB)
                </button>
                <button class="btn-secondary" onclick="showConsoleInfo()">
                    üîç ‡∏î‡∏π Console (F12)
                </button>
            </div>
        </div>
        
        <!-- Available Pages -->
        <div class="config-info">
            <h3>üìÑ Pages ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô config.json:</h3>
            <div id="pagesList"></div>
        </div>
        
        <!-- Console Logs -->
        <div style="margin: 20px 0;">
            <h3 style="margin-bottom: 10px; font-size: 15px;">üìù Debug Console:</h3>
            <div id="consoleLogs" class="console-log">
                <div class="log-line log-info">// Console logs will appear here...</div>
            </div>
        </div>
        
        <!-- Instructions -->
        <div class="instruction-box">
            <h3>üìö ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:</h3>
            <ol>
                <li><strong>‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç USERNAME:</strong> ‡πÄ‡∏õ‡∏¥‡∏î <code>meta-config.js</code> ‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ <code>YOUR_USERNAME</code> ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô GitHub username ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</li>
                <li><strong>Push ‡πÑ‡∏õ GitHub:</strong> Push ‡πÑ‡∏ü‡∏•‡πå <code>config.json</code> ‡∏Ç‡∏∂‡πâ‡∏ô GitHub</li>
                <li><strong>‡πÉ‡∏ä‡πâ URL parameter:</strong> ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡πÉ‡∏ä‡πâ <code>?key=page1</code> ‡∏´‡∏£‡∏∑‡∏≠ <code>?key=page2</code></li>
                <li><strong>‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Console:</strong> ‡πÄ‡∏õ‡∏¥‡∏î Developer Console (F12) ‡∏î‡∏π Network/Console tab</li>
                <li><strong>‡∏ó‡∏î‡∏™‡∏≠‡∏ö Event:</strong> ‡∏•‡∏≠‡∏á‡∏Ñ‡∏•‡∏¥‡∏Å‡∏õ‡∏∏‡πà‡∏° "Track Event" ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ fbq() ‡∏ñ‡∏π‡∏Å inject</li>
            </ol>
        </div>
    </div>

    <!-- Load Meta Config Script -->
    <script src="meta-config.js"></script>
    
    <!-- Test Functions -->
    <script>
        // ================== Console Logging ==================
        const logContainer = document.getElementById('consoleLogs');
        const originalLog = console.log;
        const originalError = console.error;
        const originalWarn = console.warn;
        
        function addLog(message, type = 'info') {
            const line = document.createElement('div');
            line.className = `log-line log-${type}`;
            const timestamp = new Date().toLocaleTimeString('th-TH');
            line.textContent = `[${timestamp}] ${message}`;
            logContainer.appendChild(line);
            logContainer.scrollTop = logContainer.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog(...args);
            addLog(args.join(' '), 'success');
        };
        
        console.error = function(...args) {
            originalError(...args);
            addLog(args.join(' '), 'error');
        };
        
        console.warn = function(...args) {
            originalWarn(...args);
            addLog(args.join(' '), 'info');
        };
        
        // ================== Display Config ==================
        function displayCurrentConfig() {
            const params = new URLSearchParams(window.location.search);
            const pageKey = params.get('key') || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏';
            
            if (typeof CONFIG_PAGES !== 'undefined' && CONFIG_PAGES.length > 0) {
                const pageConfig = CONFIG_PAGES.find(p => p.key === pageKey);
                if (pageConfig) {
                    document.getElementById('currentKey').textContent = pageConfig.key;
                    document.getElementById('currentName').textContent = pageConfig.name;
                    document.getElementById('currentPixel').textContent = pageConfig.pixelId;
                    document.getElementById('currentDom').textContent = pageConfig.domainVerification;
                    document.getElementById('configContainer').style.display = 'block';
                    
                    const statusDiv = document.getElementById('status');
                    statusDiv.className = 'status status-success';
                    statusDiv.innerHTML = `‚úÖ Config ‡πÇ‡∏´‡∏•‡∏î‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (Key: <strong>${pageKey}</strong>)`;
                    
                    displayAvailablePages();
                    return true;
                }
            }
            
            const statusDiv = document.getElementById('status');
            statusDiv.className = 'status status-error';
            statusDiv.innerHTML = `‚ùå ‡πÑ‡∏°‡πà‡∏û‡∏ö Config ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö key: <strong>${pageKey}</strong>`;
            return false;
        }
        
        function displayAvailablePages() {
            if (typeof CONFIG_PAGES !== 'undefined' && CONFIG_PAGES.length > 0) {
                const pagesList = document.getElementById('pagesList');
                const html = CONFIG_PAGES.map((page, idx) => 
                    `<p style="margin: 8px 0; padding: 8px; background: #fafafa; border-radius: 3px;">
                        <strong style="color: #667eea;">${idx + 1}.</strong> 
                        <code style="background: white; padding: 3px 8px; border: 1px solid #ddd;">${page.key}</code> 
                        <span style="color: #666;">‚Üí ${page.name}</span>
                    </p>`
                ).join('');
                pagesList.innerHTML = html || '<p style="color: #999;">‡πÑ‡∏°‡πà‡∏û‡∏ö pages</p>';
            } else {
                document.getElementById('pagesList').innerHTML = '<p style="color: #999;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</p>';
            }
        }
        
        // ================== Event Tracking ==================
        function testTrackEvent(eventName, params) {
            if (typeof fbq === 'undefined') {
                alert('‚ùå FBQ ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ inject\n\n‚úì ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö:\n1. Browser Console (F12)\n2. Meta Pixel ‡∏ñ‡∏π‡∏Å inject ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà\n3. GitHub URL ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà');
                return;
            }
            
            fbq('track', eventName, params);
            console.log(`‚úì FB Event Tracked: ${eventName}`, params);
            alert(`‚úì Event: ${eventName}\n‚úì Params: ${JSON.stringify(params)}\n\nüìù ‡∏î‡∏π Console ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô`);
        }
        
        function showConsoleInfo() {
            alert('‡πÄ‡∏õ‡∏¥‡∏î Browser Console:\n\nü™ü Windows: Ctrl+Shift+J\nüçé Mac: Cmd+Option+J\n\n‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏î‡∏π Network tab ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏´‡∏≤ config.json');
        }
        
        // ================== Initialization ==================
        window.addEventListener('load', () => {
            setTimeout(() => {
                addLog('üéØ Page initialized', 'info');
                displayCurrentConfig();
            }, 1000);
        });
        
        addLog('üìÑ Page loading...', 'info');
    </script>
</body>
</html>
